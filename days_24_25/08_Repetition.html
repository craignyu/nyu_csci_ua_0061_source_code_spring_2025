<!DOCTYPE html>
<html lang="en">

<head>
    <title>Repetition</title>

    <!-- Import the Vue library from a CDN -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
    <h1>Repetition</h1>

    <!-- Set up a div with the ID 'app' as the root of our Vue application -->
    <div id="app">

        <ul>
            <!-- v-for repeats this <li> once for each item in the 'fruitNames' array -->
            <!-- We're using the fruit name as the :key, which is safe now that we ensure uniqueness -->
            <li v-for="(fruit, index) in fruitNames" :key="fruit">
                {{ fruit }} is at index {{ index }}
            </li>
        </ul>

        <!-- Let the user add a new fruit to the list -->
        <div>
            <label for="newFruit">New Fruit:</label>

            <!-- This input is bound to the 'newFruitName' variable -->
            <input id="newFruit" type="text" v-model="newFruitName">

            <!-- When the button is clicked, we validate and add the fruit -->
            <button @click="addFruit">Add Fruit</button>
        </div>
    </div>

    <script>
        Vue.createApp({
            data: function() {
                return {
                    fruitNames: ['apple', 'pear', 'peach', 'orange'],
                    newFruitName: ''
                };
            },
            methods: {
                addFruit: function() {
                    // Trim any extra whitespace from the input
                    this.newFruitName = this.newFruitName.trim();

                    // Check if the input is not empty and not already in the list
                    if (
                        this.newFruitName.length > 0 &&
                        !this.fruitNames.includes(this.newFruitName)
                    ) {
                        this.fruitNames.push(this.newFruitName);
                        this.newFruitName = ''; // Clear the input box
                    }
                }
            }
        }).mount("#app");
    </script>
</body>

</html>
